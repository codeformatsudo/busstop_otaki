!function(){"use strict";var r,o=$(window).width(),a=$(window).height();function e(){var e=o-40,t=a-130;$("#map").css({width:e+"px",height:t+"px","margin-left":"auto","margin-right":"auto"})}function n(e){for(var t=e.split("\n"),o={type:"FeatureCollection",features:[]},a=t[0].split(","),r=1;r<t.length-1;r++){for(var n=t[r].split(","),i={},p=3;p<a.length;p++)i[a[p]]=n[p];var c=parseFloat(n[1]),u=[parseFloat(n[2]),c];o.features.push({type:"Feature",properties:i,geometry:{type:"Point",coordinates:u}})}return o}function i(e,t){t.bindPopup(e.properties.popup)}function p(e,t){return L.marker(t,{icon:L.AwesomeMarkers.icon({icon:e.properties.icon,prefix:"fa",markerColor:e.properties.iconColor})})}function c(e,t){return L.marker(t,{icon:L.icon({iconUrl:e.properties.icon,iconSize:[20,20],popupAnchor:[0,-20],className:"photo-icon"})})}e(),$(window).resize(e),$(document).ready(function(){$.ajax({type:"GET",url:"common/data/initialSetting.csv",dataType:"text"}).then(function(e){!function(e){var t;t=768<=o?parseFloat(e.zoomSize):parseFloat(e.zoomSize)-1;r=L.map("map",{gestureHandling:!0}).setView([e.lat,e.lng],t),L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'}).addTo(r);L.control.locate({layer:new L.LayerGroup,drawCircle:!1,keepCurrentZoomLevel:!0,icon:"fa fa-map-marker",follow:!0,showPopup:!0,strings:{title:"現在地",popup:"現在地"}}).addTo(r)}(function(e){var t=e.split("\n")[1].split(","),o=document.querySelector("header h1");t&&(o.innerHTML=t[0]);var a=document.createElement("meta");a.setAttribute("titke",o),document.getElementsByTagName("head")[0].appendChild(a);var r=t[1],n=document.createElement("meta");return n.setAttribute("description",r),document.getElementsByTagName("head")[0].appendChild(n),document.querySelector("footer").innerHTML=t[2],{lat:t[3],lng:t[4],zoomSize:t[5]}}(e))})}),$(document).ready(function(){$.ajax({type:"GET",url:"common/data/data.csv",dataType:"text"}).then(function(e){var t,o,a;t=n(e),o=L.markerClusterGroup({disableClusteringAtZoom:17}),a=L.geoJson(t,{onEachFeature:i,pointToLayer:p}),o.addLayer(a),r.addLayer(o)})}),$(document).ready(function(){$.ajax({type:"GET",url:"common/data/photoData.csv",dataaaType:"text"}).then(function(e){var t,o;t=n(e),o=L.geoJson(t,{onEachFeature:i,pointToLayer:c}),r.addLayer(o)})})}();